<!-- consulta.html -->
<div class="modal-consulta">
  <h2>Consulta Veterinaria ğŸ©º</h2>
  <form id="form-consulta">
    <!-- 1. IDENTIFICACIÃ“N -->
    <fieldset>
      <legend class="fieldset-titulo">ğŸ¶ IdentificaciÃ³n de Mascota</legend>
      <label>
        <input type="radio" name="consultaType" value="existente" checked />
        Consulta existente
      </label>
      <label>
        <input type="radio" name="consultaType" value="nueva" />
        Consulta nueva (cliente y mascota)
      </label>

      <!-- EXISTENTE: buscador + listado -->
      <div id="consulta-existente">
        <div class="grid-parejas">
          <label>ğŸ” Nombre Mascota:
            <input type="text" id="consulta-petName" placeholder="Ej. Loki, Pelusaâ€¦" />
          </label>
          <button type="button" class="button-86" id="buscar-consulta">Buscar</button>
        </div>
        <ul id="consulta-results-list"></ul>
      </div>

      <!-- NUEVA / EDITAR datos de cliente -->
      <div id="consulta-nueva" style="display:none; margin-top:1em;">
        <div class="grid-parejas">
          <label>ğŸ‘¤ Propietario:
            <input type="text" name="ownerName" id="ownerName" />
          </label>
          <label>ğŸ“ TelÃ©fono:
            <input type="tel" name="ownerPhone" id="ownerPhone" />
          </label>
          <label>ğŸ“§ Correo:
            <input type="email" name="ownerEmail" id="ownerEmail" />
          </label>
          <label>ğŸ¾ Nombre Mascota:
            <input type="text" name="petNameNew" id="petNameNew" />
          </label>
          <label>ğŸ§¬ Especie:
            <input type="text" name="speciesNew" id="speciesNew" />
          </label>
          <label>ğŸ• Raza:
            <input type="text" name="breedNew" id="breedNew" />
          </label>
          <label>ğŸ‚ Edad:
            <input type="number" name="age" id="age" min="0" />
          </label>
          <label>âš–ï¸ Peso:
            <input type="number" name="weight" id="weight" step="0.1" />
          </label>
          <label>ğŸ’‰ Esterilizado:
            <select name="esterilizado" id="esterilizado">
              <option>SÃ­</option><option>No</option>
            </select>
          </label>
          <label>ğŸ“ Observaciones:
            <textarea name="observaciones" id="observaciones" rows="2"></textarea>
          </label>
        </div>
        <button type="button" class="button-86" id="update-client-btn">âœï¸ Actualizar Cliente</button>
      </div>
    </fieldset>

    <!-- 2. CONSULTA DETALLADA -->
    <button type="button" class="button-86" id="toggle-avanzado">ğŸ§¬ Consulta Detallada</button>
    <div id="seccion-avanzada" style="display:none; margin-top:1em;">
      <fieldset>
        <legend class="fieldset-titulo">ğŸ“‹ Historial ClÃ­nico Adicional</legend>
        <div class="grid-parejas">
          <label>ğŸ“– Motivo:
            <textarea name="motivoConsulta" id="motivoConsulta"></textarea>
          </label>
          <label>ğŸ¥ Historial:
            <textarea name="historialMedico" id="historialMedico"></textarea>
          </label>
          <label>ğŸ’‰ VacunaciÃ³n:
            <input type="text" name="vacunacion" id="vacunacion" />
          </label>
          <label>ğŸ› DesparasitaciÃ³n:
            <input type="text" name="desparasitacion" id="desparasitacion" />
          </label>
          <label>ğŸ¥© AlimentaciÃ³n:
            <input type="text" name="alimentacion" id="alimentacion" />
          </label>
          <label>ğŸ“Š Estado Corporal:
            <input type="number" name="estadoCorporal" id="estadoCorporal" min="1" max="9" />
          </label>
        </div>
      </fieldset>
    </div>

    <!-- 3. MEDICAMENTOS -->
    <fieldset>
      <legend class="fieldset-titulo">ğŸ’Š Medicamentos Administrados</legend>
      <table id="tabla-meds-consulta">
        <thead>
          <tr>
            <th>Medicamento</th><th>DosificaciÃ³n</th>
            <th>VÃ­a</th><th>Precio</th><th>AcciÃ³n</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <button type="button" class="button-86 small" id="add-med">â• AÃ±adir Medicamento</button>
      <div style="margin-top:1em">
        <strong>Total: $<span id="total-consulta">0.00</span></strong>
      </div>
    </fieldset>

    <!-- 4. GUARDAR -->
    <button type="submit" class="button-86">ğŸ’¾ Guardar Consulta</button>
  </form>
</div>

<style>
  /* estilos resumidosâ€¦ */
  .grid-parejas { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:1em; }
  .button-86.small { font-size:.85rem; padding:.3em .8em; }
  table { width:100%; border-collapse:collapse; margin-top:.5em; }
  th,td { border:1px solid #ccc; padding:.4em; text-align:left; }
</style>
<script src="consulta.js"></script>
