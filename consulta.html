<!-- consulta.html -->
<div class="modal-consulta">
  <h2>Consulta Veterinaria ğŸ©º v12</h2>

  <form id="form-consulta">
    <!-- TIPO DE CONSULTA -->
    <fieldset>
      <legend class="fieldset-titulo">ğŸ¶ IdentificaciÃ³n de Mascota</legend>
      <label>
        <input type="radio" name="consultaType" value="existente" checked />
        Consulta existente
      </label>
      <label>
        <input type="radio" name="consultaType" value="nueva" />
        Consulta nueva (cliente y mascota)
      </label>

      <!-- BUSCAR EXISTENTE -->
      <div id="consulta-existente" style="margin-top:1em;">
        <label>ğŸ” Nombre de la Mascota:</label>
        <input type="text" id="consulta-petName" placeholder="Ej. Loki, Pelusa..." />
        <button type="button" class="button-86" id="buscar-consulta">Buscar</button>
        <div id="consulta-result"></div>
      </div>

      <!-- DIAGRAMA MASCOTA -->
      <div id="cliente-diagrama" style="display:none; margin-top:1em; text-align:center;">
        <img id="diagrama-img" src="svg/placeholder.png" alt="Diagrama Mascota" style="max-width:100%; max-height:200px;" />
      </div>

      <!-- EDICIÃ“N DE CLIENTE (solo existente) -->
      <div id="cliente-edicion" style="display:none; margin-top:1em;">
        <h4>âœï¸ Editar Datos del Cliente</h4>
        <div class="grid-parejas">
          <label>ğŸ‘¤ Propietario:
            <input type="text" id="edit-ownerName" name="Nombre del propietario" />
          </label>
          <label>ğŸ“ TelÃ©fono:
            <input type="tel" id="edit-ownerPhone" name="NÃºmero de TelÃ©fono" />
          </label>
          <label>ğŸ“§ Correo:
            <input type="email" id="edit-ownerEmail" name="Correo" />
          </label>
          <label>ğŸ¾ Mascota:
            <input type="text" id="edit-petName" name="Nombre de la mascota" />
          </label>
          <label>ğŸ§¬ Especie:
            <input type="text" id="edit-species" name="Especie" />
          </label>
          <label>ğŸ• Raza:
            <input type="text" id="edit-breed" name="Raza" />
          </label>
          <label>ğŸ‚ Edad:
            <input type="number" id="edit-age" name="Edad" min="0" />
          </label>
          <label>âš–ï¸ Peso:
            <input type="number" id="edit-weight" name="Peso" step="0.1" />
          </label>
          <label>ğŸ’‰ Esterilizado:
            <select id="edit-sterilized" name="Esterilizado">
              <option value="SÃ­">SÃ­</option>
              <option value="No">No</option>
            </select>
          </label>
          <label>ğŸ“ Observaciones:
            <textarea id="edit-notes" name="Observaciones" rows="2"></textarea>
          </label>
        </div>
        <button type="button" class="button-86" id="btn-actualizar-cliente">
          âœï¸ Actualizar Cliente
        </button>
      </div>

      <!-- NUEVA CONSULTA (cliente+mascota) -->
      <div id="consulta-nueva" style="display:none; margin-top:1em;">
        <div class="grid-parejas">
          <label>ğŸ‘¤ Propietario:
            <input type="text" name="Nombre del propietario" />
          </label>
          <label>ğŸ“ TelÃ©fono:
            <input type="tel" name="NÃºmero de TelÃ©fono" />
          </label>
          <label>ğŸ“§ Correo:
            <input type="email" name="Correo" />
          </label>
          <label>ğŸ¾ Mascota:
            <input type="text" name="Nombre de la mascota" />
          </label>
          <label>ğŸ§¬ Especie:
            <input type="text" name="Especie" />
          </label>
          <label>ğŸ• Raza:
            <input type="text" name="Raza" />
          </label>
          <label>ğŸ‚ Edad:
            <input type="number" name="Edad" min="0" />
          </label>
          <label>âš–ï¸ Peso:
            <input type="number" name="Peso" step="0.1" />
          </label>
          <label>ğŸ’‰ Esterilizado:
            <select name="Esterilizado">
              <option>SÃ­</option>
              <option>No</option>
            </select>
          </label>
          <label>ğŸ“ Observaciones:
            <textarea name="Observaciones" rows="2"></textarea>
          </label>
        </div>
      </div>
    </fieldset>

    <!-- CONSULTA DETALLADA -->
    <button type="button" class="button-86" id="toggle-avanzado">
      ğŸ§¬ Consulta Detallada
    </button>
    <div id="seccion-avanzada" style="display:none; margin-top:1em;">
      <fieldset>
        <legend class="fieldset-titulo">ğŸ“‹ Historial ClÃ­nico Adicional</legend>
        <div class="grid-parejas">
          <label>ğŸ“– Motivo:
            <textarea name="motivoConsulta" rows="2"></textarea>
          </label>
          <label>ğŸ¥ Historial MÃ©dico:
            <textarea name="historialMedico" rows="2"></textarea>
          </label>
          <label>ğŸ’‰ VacunaciÃ³n:
            <input type="text" name="vacunacion" />
          </label>
          <label>ğŸ› DesparasitaciÃ³n:
            <input type="text" name="desparasitacion" />
          </label>
          <label>ğŸ¥© AlimentaciÃ³n:
            <input type="text" name="alimentacion" />
          </label>
          <label>ğŸ“Š Estado Corporal:
            <input type="number" name="estadoCorporal" min="1" max="9" />
          </label>
        </div>
      </fieldset>
    </div>

    <!-- MEDICAMENTOS SUMINISTRADOS -->
    <fieldset style="margin-top:1em;">
      <legend class="fieldset-titulo">ğŸ’Š Medicamentos e Indicaciones</legend>
      <table class="tabla-meds" style="width:100%; margin-bottom:0.5em;">
        <thead>
          <tr>
            <th>Medicamento</th>
            <th>Cantidad/Forma</th>
            <th>Precio</th>
            <th>â€“</th>
          </tr>
        </thead>
        <tbody id="meds-cuerpo"></tbody>
        <tfoot>
          <tr>
            <td colspan="2" style="text-align:right;"><strong>Total:</strong></td>
            <td><span id="meds-total">0.00</span></td>
            <td></td>
          </tr>
        </tfoot>
      </table>
      <button type="button" class="button-86 small" id="add-medicamento">â• AÃ±adir Medicamento</button>
      <label style="display:block; margin-top:1em;">
        ğŸ“ Indicaciones:
        <textarea id="indicaciones" rows="2" style="width:100%;"></textarea>
      </label>
    </fieldset>

    <!-- GUARDAR CONSULTA -->
    <button type="submit" class="button-86" style="margin-top:1em;">ğŸ’¾ Guardar Consulta</button>
  </form>
</div>

<style>
  .modal-consulta { padding:1em; border-radius:10px; background:#e3f2fd; border:2px solid #0288d1; margin:0 auto; max-width:720px; }
  .fieldset-titulo { background:#bbdefb; padding:0.5em; border-radius:6px; font-weight:bold; font-size:1.1em; margin-bottom:0.5em; }
  .grid-parejas { display:grid; grid-template-columns:repeat(auto-fit, minmax(240px,1fr)); gap:1em; }
  .grid-parejas label { display:flex; flex-direction:column; font-size:0.95em; font-weight:bold; }
  textarea, input, select { padding:0.4em; border-radius:5px; border:1px solid #ccc; font-size:0.95em; }
  fieldset { border:1px solid #90caf9; border-radius:10px; padding:1em; margin-bottom:1.5em; background:#f1f8ff; }
  .tabla-meds th, .tabla-meds td { border:1px solid #00bfbf; padding:0.5em; text-align:left; word-break:break-word; }
  .tabla-meds th { background:#00bfbf; color:#fff; }
  .button-86 { background:#0288d1; color:#fff; padding:0.5em 1.2em; border:none; border-radius:6px; cursor:pointer; margin-top:0.5em; }
  .button-86.small { font-size:0.8em; padding:0.3em 0.6em; }
  .button-86:hover { background:#0277bd; }
</style>

<script src="consulta.js"></script>
