<!-- clientes.html FINAL, listo para sustituir -->
<div class="modal-clientes">
  <h2>Registro de Cliente üêæ</h2>

  <!-- Campo de b√∫squeda tipo dropdown -->
  <div style="margin-bottom: 1em;">
    <label for="searchPet">Selecciona mascota registrada:</label>
    <select id="searchPet">
      <option value="">-- Buscar mascota existente --</option>
    </select>
  </div>

  <form id="form-clientes">
    <!-- Datos del Propietario -->
    <fieldset>
      <legend>Datos del Propietario</legend>
      <div class="grid-two-cols">
        <div class="form-group">
          <label for="ownerName">Nombre del propietario:</label>
          <input type="text" id="ownerName" name="ownerName" required />
        </div>
        <div class="form-group">
          <label for="ownerPhone">N√∫mero de Tel√©fono:</label>
          <input type="tel" id="ownerPhone" name="ownerPhone" required />
        </div>
        <div class="form-group">
          <label for="ownerEmail">Correo:</label>
          <input type="email" id="ownerEmail" name="ownerEmail" required />
        </div>
      </div>
    </fieldset>

    <!-- Datos de la Mascota -->
    <fieldset>
      <legend>Datos de la Mascota</legend>
      <div class="grid-two-cols">
        <div class="form-group">
          <label for="petName">Nombre de la mascota:</label>
          <input type="text" id="petName" name="petName" required />
        </div>
        <div class="form-group">
          <label for="pet-species">Especie:</label>
          <select id="pet-species" name="species" required>
            <option value="">-- Selecciona --</option>
            <option value="perro">Perro</option>
            <option value="gato">Gato</option>
            <option value="ave">Ave</option>
            <option value="tortuga">Tortuga</option>
            <option value="serpiente">Serpiente</option>
            <option value="lagarto">Lagarto</option>
            <option value="pez">Pez</option>
            <option value="roedor">Roedor</option>
          </select>
        </div>
        <div class="form-group">
          <label for="breed">Raza:</label>
          <select id="breed" name="breed" required>
            <option value="">-- Selecciona especie primero --</option>
          </select>
          <input type="text" id="breed-other" placeholder="Especificar otra raza" style="display:none; margin-top:5px;" />
        </div>
        <div class="form-group">
          <label for="age">Edad (a√±os.decimales):</label>
          <input type="number" id="age" name="age" step="0.1" min="0" />
        </div>
        <div class="form-group">
          <label for="weight">Peso (kg.decimales):</label>
          <input type="number" id="weight" name="weight" step="0.01" min="0" />
        </div>
        <div class="form-group">
          <label>¬øEst√° esterilizado?</label>
          <div class="radio-group">
            <label for="sterilized-si"><input type="radio" id="sterilized-si" name="sterilized" value="si" /> S√≠</label>
            <label for="sterilized-no"><input type="radio" id="sterilized-no" name="sterilized" value="no" /> No</label>
          </div>
        </div>
      </div>

      <!-- Observaciones -->
      <div class="form-group">
        <label for="observations">Observaciones:</label>
        <textarea id="observations" name="observations" rows="2"></textarea>
      </div>

      <!-- Diagrama Corporal con hotspots -->
      <div id="cliente-diagrama" class="diagrama-container">
        <img id="diagrama-img" src="svg/placeholder.png" alt="Diagrama mascota" />
      </div>
    </fieldset>

    <button type="submit" class="button-86" id="btnGuardarCliente">Guardar Cliente</button>
  </form>
</div>

<style>
.modal-clientes {
  background: white;
  padding: 1em;
  border-radius: 12px;
  width: 90%;
  max-width: 900px;
  position: relative;
  overflow-y: auto;
  max-height: 95vh;
}
.modal-content {
  width: 90%;
  max-width: 900px;
}
.diagrama-container img {
  max-width: 100%;
  margin-top: 1em;
  border: 1px solid #ccc;
  border-radius: 8px;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  await busquedaClientes({
    selectId: "searchPet",
    formId: "form-clientes",
    especieId: "pet-species",
    razaId: "breed",
    campos: {
      "Nombre del propietario": "ownerName",
      "N√∫mero de Tel√©fono": "ownerPhone",
      "Correo": "ownerEmail",
      "Nombre de la mascota": "petName",
      "Edad": "age",
      "Peso": "weight",
      "Observaciones": "observations"
    }
  });

  document.getElementById('pet-species').addEventListener('change', () => {
    if (typeof cargarDiagramaCliente === 'function') cargarDiagramaCliente();
  });
});
</script>
